import{b as x,c as T,d as V,e as D,f as W,g as A}from"./chunk-VA7JLHUR.js";import{a as B}from"./chunk-OKM456CI.js";import{A as P,E as u,F as a,H as o,I as r,J as C,K as c,M as y,N as s,O as v,Q as L,R as F,S as G,T as j,V as E,W as w,ba as I,c as h,da as O,e as d,h as f,j as S,ja as k,k as b,ka as N,q as _,y as M,z as n}from"./chunk-24WKXJ2Q.js";var R=i=>["/movie",i];function $(i,m){if(i&1&&(o(0,"option",3),s(1),r()),i&2){let e=m.$implicit;a("ngValue",e.id),n(),v(e.name)}}function z(i,m){if(i&1&&(o(0,"div",9)(1,"a",10),C(2,"img",11),o(3,"h3"),s(4),r()()()),i&2){let e=m.$implicit;n(),a("routerLink",w(4,R,e.id)),n(),y("alt",e.title),a("src","https://image.tmdb.org/t/p/w200"+e.poster_path,M),n(2),v(e.title)}}var te=(()=>{class i{movieService;movies=[];genres=[];selectedGenreId=null;currentPage=1;totalPages=1;genreSubject=new d(null);pageSubject=new d(1);subscription=new h;constructor(e){this.movieService=e}ngOnInit(){this.loadGenres(),this.setupMovieLoading()}ngOnDestroy(){this.subscription.unsubscribe()}loadGenres(){this.movieService.getGenres().subscribe(e=>{this.genres=e.genres})}setupMovieLoading(){this.subscription=f([this.genreSubject,this.pageSubject]).pipe(S(([e,l])=>(console.log(`Fetching movies for genre ${e} on page ${l}`),this.movieService.getPopularMovies(l,e))),b(e=>{this.movies=e.results,this.totalPages=e.total_pages,this.currentPage=this.pageSubject.value,console.log("Movies loaded:",this.movies)})).subscribe()}onGenreChange(e){this.selectedGenreId=e,this.genreSubject.next(e),this.pageSubject.next(1)}loadPreviousPage(){this.currentPage>1&&this.pageSubject.next(this.currentPage-1)}loadNextPage(){this.currentPage<this.totalPages&&this.pageSubject.next(this.currentPage+1)}static \u0275fac=function(l){return new(l||i)(P(B))};static \u0275cmp=_({type:i,selectors:[["app-movie-list"]],standalone:!0,features:[E],decls:18,vars:8,consts:[[1,"genre-filter"],["for","genre-select"],["id","genre-select",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"movie-list"],["class","movie-card",4,"ngFor","ngForOf"],[1,"pagination"],[3,"click","disabled"],[1,"movie-card"],[3,"routerLink"],[3,"src","alt"]],template:function(l,t){l&1&&(o(0,"h2"),s(1,"Popular Movies"),r(),o(2,"div",0)(3,"label",1),s(4,"Filter by Genre:"),r(),o(5,"select",2),j("ngModelChange",function(p){return G(t.selectedGenreId,p)||(t.selectedGenreId=p),p}),c("ngModelChange",function(p){return t.onGenreChange(p)}),o(6,"option",3),s(7,"All Genres"),r(),u(8,$,2,2,"option",4),r()(),o(9,"div",5),u(10,z,5,6,"div",6),r(),o(11,"div",7)(12,"button",8),c("click",function(){return t.loadPreviousPage()}),s(13,"Previous"),r(),o(14,"span"),s(15),r(),o(16,"button",8),c("click",function(){return t.loadNextPage()}),s(17,"Next"),r()()),l&2&&(n(5),F("ngModel",t.selectedGenreId),n(),a("ngValue",null),n(2),a("ngForOf",t.genres),n(2),a("ngForOf",t.movies),n(2),a("disabled",t.currentPage===1),n(3),L("Page ",t.currentPage," of ",t.totalPages,""),n(),a("disabled",t.currentPage===t.totalPages))},dependencies:[O,I,N,k,A,D,W,V,x,T],encapsulation:2})}return i})();export{te as MovieListComponent};
